<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset='utf-8'>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>Talking Boye</title>

    <link rel='icon' type='image/png' href='/favicon.png'>
    <link rel='stylesheet' href='/global.css'>
    <link rel='stylesheet' href='/build/bundle.css'>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.2/css/all.min.css"
          integrity="sha512-HK5fgLBL+xu6dm/Ii3z4xhlSUyZgTT9tuc/hSrtw6uzJOvgRr2a9jyxxT1ely+B+xFAmJKVSTbpM/CuL7qxO8w=="
          crossorigin="anonymous"/>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="js/audiodisplay.js"></script>
    <script src="js/recorder.js"></script>
    <script src="js/main.js"></script>
    <script src="https://unpkg.com/wavesurfer.js@4.5.0/dist/wavesurfer.js"></script>
    <script src="https://unpkg.com/wavesurfer.js@4.5.0/dist/plugin/wavesurfer.microphone.min.js"></script>
    <script defer src='/build/bundle.js'></script>
</head>

<body>
<button onclick="start()">start</button>
<div id="waveform"></div>
<script>

    function start() {
        const wavesurfer = WaveSurfer.create({
            container: document.querySelector('#waveform'),
            waveColor: '#D9DCFF',
            progressColor: '#4353FF',
            cursorColor: '#4353FF',
            barWidth: 3,
            barRadius: 3,
            cursorWidth: 1,
            height: 200,
            barGap: 3,
            plugins: [
                WaveSurfer.microphone.create()
            ]
        });
        let stream1;
        wavesurfer.microphone.on('deviceReady', function (stream) {
            console.log('Device ready!', stream);
			stream1 = stream;
        });
        wavesurfer.microphone.on('deviceError', function (code) {
            console.warn('Device error: ' + code);
        });
        wavesurfer.microphone.start();
        //	https://wavesurfer-js.org/example/microphone/index.html
        setTimeout(() => {
        	debugger;
            wavesurfer.microphone.stopDevice();
			wavesurfer.backend.getAudioContext();
        }, 1000)
    }

    // wavesurfer.load('https://wavesurfer-js.org/example/media/demo.wav');
</script>
</body>
</html>
